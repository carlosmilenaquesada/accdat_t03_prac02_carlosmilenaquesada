--CREATE USER AD_TEMA_03_HIBERNATE IDENTIFIED BY AD_TEMA_03_HIBERNATE;
--GRANT CONNECT, RESOURCE,DBA TO AD_TEMA_03_HIBERNATE;
/* Conectar con el usuario anterior */
--DROP TABLE DETALLE_FACTURAS;
--DROP TABLE FACTURAS;
--DROP TABLE CLIENTES;
--DROP TABLE ARTICULOS;
--DROP TABLE FAMILIAS;
COMMIT;
CREATE TABLE FAMILIAS (
    CodFamilia VARCHAR2(3),
    NomFamilia VARCHAR2(100) NOT NULL
);
ALTER TABLE FAMILIAS ADD CONSTRAINT PK_FAMILIAS PRIMARY KEY(CodFamilia);

CREATE TABLE ARTICULOS(
    CodArticulo VARCHAR2(13),
    NomArticulo VARCHAR2(100) NOT NULL,
    CodFamilia VARCHAR2(3) NOT NULL
);
ALTER TABLE ARTICULOS ADD CONSTRAINT FK_ARTICULOS_FAMILIAS
    FOREIGN KEY(CodFamilia) REFERENCES FAMILIAS(CodFamilia);
ALTER TABLE ARTICULOS ADD CONSTRAINT PK_ARTICULOS PRIMARY KEY(CodArticulo);

CREATE TABLE CLIENTES (
    CodCliente VARCHAR2(13),
    NomCliente VARCHAR2(100) NOT NULL
);
ALTER TABLE CLIENTES ADD CONSTRAINT PK_CLIENTES PRIMARY KEY(CodCliente);

CREATE TABLE FACTURAS (
    NumFactura NUMBER(10),
    FechaFactura DATE,
    CodCliente VARCHAR2(13) NOT NULL
);
ALTER TABLE FACTURAS ADD CONSTRAINT FK_FACTURAS_CLIENTES
    FOREIGN KEY(CodCliente) REFERENCES CLIENTES(CodCliente);
ALTER TABLE FACTURAS ADD CONSTRAINT PK_FACTURAS PRIMARY KEY(NumFactura);

CREATE TABLE DETALLE_FACTURAS (
    NumFactura NUMBER(10),
    CodArticulo VARCHAR2(13)
);
ALTER TABLE DETALLE_FACTURAS ADD CONSTRAINT FK_DETALLE_FACTURAS
    FOREIGN KEY(NumFactura) REFERENCES FACTURAS(NumFactura);
ALTER TABLE DETALLE_FACTURAS ADD CONSTRAINT FK_DETALLE_ARTICULOS
    FOREIGN KEY(CodArticulo) REFERENCES ARTICULOS(CodArticulo);
ALTER TABLE DETALLE_FACTURAS ADD CONSTRAINT PK_DETALLE_FACTURAS PRIMARY KEY (NumFactura,
CodArticulo);

COMMIT;

--ALGUNOS REGISTROS QUE HE INCLUIDO PARA HACER PRUEBAS
-- Registros para la tabla FAMILIAS
--REGISTROS---------------------------------------------------------------------
--FAMILIAS:
INSERT INTO FAMILIAS VALUES('F01', 'SOMBREROS');
INSERT INTO FAMILIAS VALUES('F02', 'CALZADO');
INSERT INTO FAMILIAS VALUES('F03', 'PANTALÓN');
COMMIT;

--ARTICULOS DE LA FAMILIA SOMBREROS (F01):
INSERT INTO ARTICULOS VALUES('ART_001', 'SOMBRERO DE COPA', 'F01');
INSERT INTO ARTICULOS VALUES('ART_002', 'SOMBRERO BOMBÍN', 'F01');
INSERT INTO ARTICULOS VALUES('ART_003', 'SOMBRERO PANAMÁ', 'F01');
INSERT INTO ARTICULOS VALUES('ART_004', 'SOMBRERO FEDORA', 'F01');
INSERT INTO ARTICULOS VALUES('ART_005', 'SOMBRERO BOINA', 'F01');

--ARTICULOS DE LA FAMILIA CALZADO (F02):
INSERT INTO ARTICULOS VALUES('ART_006', 'ZAPATOS DE VESTIR', 'F02');
INSERT INTO ARTICULOS VALUES('ART_007', 'BOTAS DE CUERO', 'F02');
INSERT INTO ARTICULOS VALUES('ART_008', 'ZAPATILLAS DEPORTIVAS', 'F02');
INSERT INTO ARTICULOS VALUES('ART_009', 'MOCASINES DE GAMUZA', 'F02');
INSERT INTO ARTICULOS VALUES('ART_010', 'SANDALIAS DE PLAYA', 'F02');

--ARTICULOS DE LA FAMILIA PANTALÓN (F03):
INSERT INTO ARTICULOS VALUES('ART_011', 'PANTALÓN VAQUERO', 'F03');
INSERT INTO ARTICULOS VALUES('ART_012', 'PANTALÓN CHINO', 'F03');
INSERT INTO ARTICULOS VALUES('ART_013', 'PANTALÓN CORTO', 'F03');
INSERT INTO ARTICULOS VALUES('ART_014', 'PANTALÓN DE VESTIR', 'F03');
INSERT INTO ARTICULOS VALUES('ART_015', 'LEGGINGS DEPORTIVOS', 'F03');
COMMIT;

--CLIENTES:
INSERT INTO CLIENTES VALUES('CLI_001', 'CLIENTEUNO');
INSERT INTO CLIENTES VALUES('CLI_002', 'CLIENTEDOS');
INSERT INTO CLIENTES VALUES('CLI_003', 'CLIENTETRES');
COMMIT;

--FACTURAS
INSERT INTO FACTURAS VALUES (1, TO_DATE('21-10-2021', 'DD-MM-YYYY'), 'CLI_001');
INSERT INTO FACTURAS VALUES (2, TO_DATE('22-10-2022', 'DD-MM-YYYY'), 'CLI_001');
INSERT INTO FACTURAS VALUES (3, TO_DATE('23-10-2023', 'DD-MM-YYYY'), 'CLI_001');
INSERT INTO FACTURAS VALUES (4, TO_DATE('24-10-2021', 'DD-MM-YYYY'), 'CLI_002');
INSERT INTO FACTURAS VALUES (5, TO_DATE('25-10-2022', 'DD-MM-YYYY'), 'CLI_002');
INSERT INTO FACTURAS VALUES (6, TO_DATE('26-10-2023', 'DD-MM-YYYY'), 'CLI_002');
INSERT INTO FACTURAS VALUES (7, TO_DATE('27-10-2021', 'DD-MM-YYYY'), 'CLI_003');
INSERT INTO FACTURAS VALUES (8, TO_DATE('28-10-2022', 'DD-MM-YYYY'), 'CLI_003');
INSERT INTO FACTURAS VALUES (9, TO_DATE('29-10-2023', 'DD-MM-YYYY'), 'CLI_003');
COMMIT;


--DETALLE_FACTURAS (LINEAS DE FACTURA) DE LA FACTURA 0:
INSERT INTO DETALLE_FACTURAS VALUES(1, 'ART_001');
INSERT INTO DETALLE_FACTURAS VALUES(1, 'ART_002');
INSERT INTO DETALLE_FACTURAS VALUES(1, 'ART_003');
--DETALLE_FACTURAS (LINEAS DE FACTURA) DE LA FACTURA 1:
INSERT INTO DETALLE_FACTURAS VALUES(2, 'ART_004');
INSERT INTO DETALLE_FACTURAS VALUES(2, 'ART_005');
INSERT INTO DETALLE_FACTURAS VALUES(2, 'ART_006');
--DETALLE_FACTURAS (LINEAS DE FACTURA) DE LA FACTURA 2:
INSERT INTO DETALLE_FACTURAS VALUES(3, 'ART_007');
INSERT INTO DETALLE_FACTURAS VALUES(3, 'ART_008');
INSERT INTO DETALLE_FACTURAS VALUES(3, 'ART_009');
--DETALLE_FACTURAS (LINEAS DE FACTURA) DE LA FACTURA 3:
INSERT INTO DETALLE_FACTURAS VALUES(4, 'ART_010');
INSERT INTO DETALLE_FACTURAS VALUES(4, 'ART_011');
INSERT INTO DETALLE_FACTURAS VALUES(4, 'ART_012');
--DETALLE_FACTURAS (LINEAS DE FACTURA) DE LA FACTURA 4:
INSERT INTO DETALLE_FACTURAS VALUES(5, 'ART_013');
INSERT INTO DETALLE_FACTURAS VALUES(5, 'ART_014');
INSERT INTO DETALLE_FACTURAS VALUES(5, 'ART_015');
--DETALLE_FACTURAS (LINEAS DE FACTURA) DE LA FACTURA 5:
INSERT INTO DETALLE_FACTURAS VALUES(6, 'ART_001');
INSERT INTO DETALLE_FACTURAS VALUES(6, 'ART_002');
INSERT INTO DETALLE_FACTURAS VALUES(6, 'ART_003');
--DETALLE_FACTURAS (LINEAS DE FACTURA) DE LA FACTURA 6:
INSERT INTO DETALLE_FACTURAS VALUES(7, 'ART_004');
INSERT INTO DETALLE_FACTURAS VALUES(7, 'ART_005');
INSERT INTO DETALLE_FACTURAS VALUES(7, 'ART_006');
--DETALLE_FACTURAS (LINEAS DE FACTURA) DE LA FACTURA 7:
INSERT INTO DETALLE_FACTURAS VALUES(8, 'ART_007');
INSERT INTO DETALLE_FACTURAS VALUES(8, 'ART_008');
INSERT INTO DETALLE_FACTURAS VALUES(8, 'ART_009');
--DETALLE_FACTURAS (LINEAS DE FACTURA) DE LA FACTURA 8:
INSERT INTO DETALLE_FACTURAS VALUES(9, 'ART_010');
INSERT INTO DETALLE_FACTURAS VALUES(9, 'ART_011');
INSERT INTO DETALLE_FACTURAS VALUES(9, 'ART_012');
COMMIT;